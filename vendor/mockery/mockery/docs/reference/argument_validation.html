

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Argument Validation &mdash; Real-Debrid API 2.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Real-Debrid API 2.1.0 documentation" href="../../../../../index.html"/> 

  
  <script src="../../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../../index.html" class="icon icon-home"> Real-Debrid API
          

          
          </a>

          
            
            
              <div class="version">
                2.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../intro.html">Intro</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../../../index.html">Real-Debrid API</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
      
    <li>Argument Validation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../../../_sources/vendor/mockery/mockery/docs/reference/argument_validation.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="argument-validation">
<span id="index-0"></span><h1>Argument Validation<a class="headerlink" href="#argument-validation" title="Permalink to this headline">Â¶</a></h1>
<p>The arguments passed to the <code class="docutils literal"><span class="pre">with()</span></code> declaration when setting up an
expectation determine the criteria for matching method calls to expectations.
Thus, you can setup up many expectations for a single method, each
differentiated by the expected arguments. Such argument matching is done on a
&#8220;best fit&#8221; basis.  This ensures explicit matches take precedence over
generalised matches.</p>
<p>An explicit match is merely where the expected argument and the actual
argument are easily equated (i.e. using <code class="docutils literal"><span class="pre">===</span></code> or <code class="docutils literal"><span class="pre">==</span></code>). More generalised
matches are possible using regular expressions, class hinting and the
available generic matchers. The purpose of generalised matchers is to allow
arguments be defined in non-explicit terms, e.g. <code class="docutils literal"><span class="pre">Mockery::any()</span></code> passed to
<code class="docutils literal"><span class="pre">with()</span></code> will match <strong>any</strong> argument in that position.</p>
<p>Mockery&#8217;s generic matchers do not cover all possibilities but offers optional
support for the Hamcrest library of matchers. Hamcrest is a PHP port of the
similarly named Java library (which has been ported also to Python, Erlang,
etc).  I strongly recommend using Hamcrest since Mockery simply does not need
to duplicate Hamcrest&#8217;s already impressive utility which itself promotes a
natural English DSL.</p>
<p>The example below show Mockery matchers and their Hamcrest equivalent.
Hamcrest uses functions (no namespacing).</p>
<p>Here&#8217;s a sample of the possibilities.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(1)</span>
</pre></div>
</div>
<p>Matches the integer <code class="docutils literal"><span class="pre">1</span></code>. This passes the <code class="docutils literal"><span class="pre">===</span></code> test (identical). It does
facilitate a less strict <code class="docutils literal"><span class="pre">==</span></code> check (equals) where the string <code class="docutils literal"><span class="pre">'1'</span></code> would
also match the
argument.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::any()) OR with(anything())</span>
</pre></div>
</div>
<p>Matches any argument. Basically, anything and everything passed in this
argument slot is passed unconstrained.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::type(&#39;resource&#39;)) OR with(resourceValue()) OR with(typeOf(&#39;resource&#39;))</span>
</pre></div>
</div>
<p>Matches any resource, i.e. returns true from an <code class="docutils literal"><span class="pre">is_resource()</span></code> call. The
Type matcher accepts any string which can be attached to <code class="docutils literal"><span class="pre">is_</span></code> to form a
valid type check. For example, <code class="docutils literal"><span class="pre">\Mockery::type('float')</span></code> or Hamcrest&#8217;s
<code class="docutils literal"><span class="pre">floatValue()</span></code> and <code class="docutils literal"><span class="pre">typeOf('float')</span></code> checks using <code class="docutils literal"><span class="pre">is_float()</span></code>, and
<code class="docutils literal"><span class="pre">\Mockery::type('callable')</span></code> or Hamcrest&#8217;s <code class="docutils literal"><span class="pre">callable()</span></code> uses
<code class="docutils literal"><span class="pre">is_callable()</span></code>.</p>
<p>The Type matcher also accepts a class or interface name to be used in an
<code class="docutils literal"><span class="pre">instanceof</span></code> evaluation of the actual argument (similarly Hamcrest uses
<code class="docutils literal"><span class="pre">anInstanceOf()</span></code>).</p>
<p>You may find a full list of the available type checkers at
<a class="reference external" href="http://www.php.net/manual/en/ref.var.php">php.net</a> or browse Hamcrest&#8217;s function
list in
<a class="reference external" href="http://code.google.com/p/hamcrest/source/browse/trunk/hamcrest-php/hamcrest/Hamcrest.php">the Hamcrest code</a>.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::on(closure))</span>
</pre></div>
</div>
<p>The On matcher accepts a closure (anonymous function) to which the actual
argument will be passed. If the closure evaluates to (i.e. returns) boolean
<code class="docutils literal"><span class="pre">true</span></code> then the argument is assumed to have matched the expectation. This is
invaluable where your argument expectation is a bit too complex for or simply
not implemented in the current default matchers.</p>
<p>There is no Hamcrest version of this functionality.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(&#39;/^foo/&#39;) OR with(matchesPattern(&#39;/^foo/&#39;))</span>
</pre></div>
</div>
<p>The argument declarator also assumes any given string may be a regular
expression to be used against actual arguments when matching. The regex option
is only used when a) there is no <code class="docutils literal"><span class="pre">===</span></code> or <code class="docutils literal"><span class="pre">==</span></code> match and b) when the regex
is verified to be a valid regex (i.e. does not return false from
<code class="docutils literal"><span class="pre">preg_match()</span></code>).  If the regex detection doesn&#8217;t suit your tastes, Hamcrest
offers the more explicit <code class="docutils literal"><span class="pre">matchesPattern()</span></code> function.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::ducktype(&#39;foo&#39;, &#39;bar&#39;))</span>
</pre></div>
</div>
<p>The Ducktype matcher is an alternative to matching by class type. It simply
matches any argument which is an object containing the provided list of
methods to call.</p>
<p>There is no Hamcrest version of this functionality.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::mustBe(2)) OR with(identicalTo(2))</span>
</pre></div>
</div>
<p>The MustBe matcher is more strict than the default argument matcher. The
default matcher allows for PHP type casting, but the MustBe matcher also
verifies that the argument must be of the same type as the expected value.
Thus by default, the argument <cite>&#8216;2&#8217;</cite> matches the actual argument 2 (integer)
but the MustBe matcher would fail in the same situation since the expected
argument was a string and instead we got an integer.</p>
<p>Note: Objects are not subject to an identical comparison using this matcher
since PHP would fail the comparison if both objects were not the exact same
instance. This is a hindrance when objects are generated prior to being
returned, since an identical match just would never be possible.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::not(2)) OR with(not(2))</span>
</pre></div>
</div>
<p>The Not matcher matches any argument which is not equal or identical to the
matcher&#8217;s parameter.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::anyOf(1, 2)) OR with(anyOf(1,2))</span>
</pre></div>
</div>
<p>Matches any argument which equals any one of the given parameters.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::notAnyOf(1, 2))</span>
</pre></div>
</div>
<p>Matches any argument which is not equal or identical to any of the given
parameters.</p>
<p>There is no Hamcrest version of this functionality.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::subset(array(0 =&gt; &#39;foo&#39;)))</span>
</pre></div>
</div>
<p>Matches any argument which is any array containing the given array subset.
This enforces both key naming and values, i.e. both the key and value of each
actual element is compared.</p>
<p>There is no Hamcrest version of this functionality, though Hamcrest can check
a single entry using <code class="docutils literal"><span class="pre">hasEntry()</span></code> or <code class="docutils literal"><span class="pre">hasKeyValuePair()</span></code>.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::contains(value1, value2))</span>
</pre></div>
</div>
<p>Matches any argument which is an array containing the listed values. The
naming of keys is ignored.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::hasKey(key));</span>
</pre></div>
</div>
<p>Matches any argument which is an array containing the given key name.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">with(\Mockery::hasValue(value));</span>
</pre></div>
</div>
<p>Matches any argument which is an array containing the given value.</p>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Valentin GOT.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../../',
            VERSION:'2.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>