

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pimple &mdash; Real-Debrid API 2.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Real-Debrid API 2.1.0 documentation" href="../../../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Real-Debrid API
          

          
          </a>

          
            
            
              <div class="version">
                2.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Intro</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Real-Debrid API</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
    <li>Pimple</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/vendor/pimple/pimple/README.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pimple">
<h1>Pimple<a class="headerlink" href="#pimple" title="Permalink to this headline">¶</a></h1>
<p>Pimple is a small Dependency Injection Container for PHP 5.3 that consists
of just one file and one class (about 80 lines of code).</p>
<p><a class="reference external" href="https://github.com/fabpot/Pimple">Download it</a>, require it in your code, and you&#8217;re good to go:</p>
<div class="highlight-python"><div class="highlight"><pre>require_once &#39;/path/to/Pimple.php&#39;;
</pre></div>
</div>
<p>Creating a container is a matter of instating the <code class="docutils literal"><span class="pre">Pimple</span></code> class:</p>
<div class="highlight-python"><div class="highlight"><pre>$container = new Pimple();
</pre></div>
</div>
<p>As many other dependency injection containers, Pimple is able to manage two
different kind of data: <em>services</em> and <em>parameters</em>.</p>
<div class="section" id="defining-parameters">
<h2>Defining Parameters<a class="headerlink" href="#defining-parameters" title="Permalink to this headline">¶</a></h2>
<p>Defining a parameter is as simple as using the Pimple instance as an array:</p>
<div class="highlight-python"><div class="highlight"><pre>// define some parameters
$container[&#39;cookie_name&#39;] = &#39;SESSION_ID&#39;;
$container[&#39;session_storage_class&#39;] = &#39;SessionStorage&#39;;
</pre></div>
</div>
</div>
<div class="section" id="defining-services">
<h2>Defining Services<a class="headerlink" href="#defining-services" title="Permalink to this headline">¶</a></h2>
<p>A service is an object that does something as part of a larger system.
Examples of services: Database connection, templating engine, mailer. Almost
any object could be a service.</p>
<p>Services are defined by anonymous functions that return an instance of an
object:</p>
<div class="highlight-python"><div class="highlight"><pre>// define some services
$container[&#39;session_storage&#39;] = function ($c) {
    return new $c[&#39;session_storage_class&#39;]($c[&#39;cookie_name&#39;]);
};

$container[&#39;session&#39;] = function ($c) {
    return new Session($c[&#39;session_storage&#39;]);
};
</pre></div>
</div>
<p>Notice that the anonymous function has access to the current container
instance, allowing references to other services or parameters.</p>
<p>As objects are only created when you get them, the order of the definitions
does not matter, and there is no performance penalty.</p>
<p>Using the defined services is also very easy:</p>
<div class="highlight-python"><div class="highlight"><pre>// get the session object
$session = $container[&#39;session&#39;];

// the above call is roughly equivalent to the following code:
// $storage = new SessionStorage(&#39;SESSION_ID&#39;);
// $session = new Session($storage);
</pre></div>
</div>
</div>
<div class="section" id="defining-shared-services">
<h2>Defining Shared Services<a class="headerlink" href="#defining-shared-services" title="Permalink to this headline">¶</a></h2>
<p>By default, each time you get a service, Pimple returns a new instance of it.
If you want the same instance to be returned for all calls, wrap your
anonymous function with the <code class="docutils literal"><span class="pre">share()</span></code> method:</p>
<div class="highlight-python"><div class="highlight"><pre>$container[&#39;session&#39;] = $container-&gt;share(function ($c) {
    return new Session($c[&#39;session_storage&#39;]);
});
</pre></div>
</div>
</div>
<div class="section" id="protecting-parameters">
<h2>Protecting Parameters<a class="headerlink" href="#protecting-parameters" title="Permalink to this headline">¶</a></h2>
<p>Because Pimple sees anonymous functions as service definitions, you need to
wrap anonymous functions with the <code class="docutils literal"><span class="pre">protect()</span></code> method to store them as
parameter:</p>
<div class="highlight-python"><div class="highlight"><pre>$container[&#39;random&#39;] = $container-&gt;protect(function () { return rand(); });
</pre></div>
</div>
</div>
<div class="section" id="modifying-services-after-creation">
<h2>Modifying services after creation<a class="headerlink" href="#modifying-services-after-creation" title="Permalink to this headline">¶</a></h2>
<p>In some cases you may want to modify a service definition after it has been
defined. You can use the <code class="docutils literal"><span class="pre">extend()</span></code> method to define additional code to
be run on your service just after it is created:</p>
<div class="highlight-python"><div class="highlight"><pre>$container[&#39;mail&#39;] = function ($c) {
    return new \Zend_Mail();
};

$container[&#39;mail&#39;] = $container-&gt;extend(&#39;mail&#39;, function($mail, $c) {
    $mail-&gt;setFrom($c[&#39;mail.default_from&#39;]);
    return $mail;
});
</pre></div>
</div>
<p>The first argument is the name of the object, the second is a function that
gets access to the object instance and the container. The return value is
a service definition, so you need to re-assign it on the container.</p>
<p>If the service you plan to extend is already shared, it&#8217;s recommended that you
re-wrap your extended service with the <code class="docutils literal"><span class="pre">shared</span></code> method, otherwise your extension
code will be called every time you access the service:</p>
<div class="highlight-python"><div class="highlight"><pre>$container[&#39;twig&#39;] = $container-&gt;share(function ($c) {
    return new Twig_Environment($c[&#39;twig.loader&#39;], $c[&#39;twig.options&#39;]);
});

$container[&#39;twig&#39;] = $container-&gt;share($container-&gt;extend(&#39;twig&#39;, function ($twig, $c) {
    $twig-&gt;addExtension(new MyTwigExtension());
    return $twig;
}));
</pre></div>
</div>
</div>
<div class="section" id="fetching-the-service-creation-function">
<h2>Fetching the service creation function<a class="headerlink" href="#fetching-the-service-creation-function" title="Permalink to this headline">¶</a></h2>
<p>When you access an object, Pimple automatically calls the anonymous function
that you defined, which creates the service object for you. If you want to get
raw access to this function, you can use the <code class="docutils literal"><span class="pre">raw()</span></code> method:</p>
<div class="highlight-python"><div class="highlight"><pre>$container[&#39;session&#39;] = $container-&gt;share(function ($c) {
    return new Session($c[&#39;session_storage&#39;]);
});

$sessionFunction = $container-&gt;raw(&#39;session&#39;);
</pre></div>
</div>
</div>
<div class="section" id="packaging-a-container-for-reusability">
<h2>Packaging a Container for reusability<a class="headerlink" href="#packaging-a-container-for-reusability" title="Permalink to this headline">¶</a></h2>
<p>If you use the same libraries over and over, you might want to create reusable
containers. Creating a reusable container is as simple as creating a class
that extends <code class="docutils literal"><span class="pre">Pimple</span></code>, and configuring it in the constructor:</p>
<div class="highlight-python"><div class="highlight"><pre>class SomeContainer extends Pimple
{
    public function __construct()
    {
        $this[&#39;parameter&#39;] = &#39;foo&#39;;
        $this[&#39;object&#39;] = function () { return stdClass(); };
    }
}
</pre></div>
</div>
<p>Using this container from your own is as easy as it can get:</p>
<div class="highlight-python"><div class="highlight"><pre>$container = new Pimple();

// define your project parameters and services
// ...

// embed the SomeContainer container
$container[&#39;embedded&#39;] = $container-&gt;share(function () { return new SomeContainer(); });

// configure it
$container[&#39;embedded&#39;][&#39;parameter&#39;] = &#39;bar&#39;;

// use it
$container[&#39;embedded&#39;][&#39;object&#39;]-&gt;...;
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Valentin GOT.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'2.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>